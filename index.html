<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="author" content="Conway">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/cmd.css">
<title>Conway's markdown (CMD)</title>
</head>
<body>
<h1>Conway's markdown (CMD)</h1>
<div class="page-properties">
First created: 2020-04-05<br>
Last modified: 2020-04-09
</div>
<ul>
<li>This page's source CMD: <a href="https://github.com/conway-markdown/conway-markdown.github.io/blob/master/index.cmd" title="GitHub: index.cmd"><code>index.cmd</code></a>
</li>
<li>This page's output HTML: <a href="https://github.com/conway-markdown/conway-markdown.github.io/blob/master/index.html" title="GitHub: index.html"><code>index.html</code></a>
</li>
<li>GitHub repository: <a href="https://github.com/conway-markdown/conway-markdown/" title="GitHub: Conway's markdown"><code>conway-markdown</code></a>
</li>
</ul>
<p>
Conway's fence-style markdown,
implemented in Python using regex replacements.
</p>
<p>
Conway's markdown (CMD) is the result of someone joking that
"the filenames would look like Windows executables from the 90s".
Inspired by the backticks of John Gruber's <a href="https://daringfireball.net/projects/markdown/" title="Daring Fireball: Markdown">markdown</a>,
Conway's markdown uses fence-style constructs
where an <span class="repeatable-delimiter">arbitrarily repeatable delimiter symbol</span>
is used to wrap shorter runs of that symbol.
</p>
<h2 id="usage"><a class="self-link" href="#usage"></a>Usage</h2>
<p>
Convert a CMD file to HTML, outputting to <code>cmd_name.html</code>:
</p>
<pre><code>$ python cmd.py [cmd_name[.[cmd]]]
</code></pre>
<p>
Omit <code>[cmd_name[.[cmd]]]</code> to convert all CMD files
in the current directory (at all levels),
except those listed in <code>.cmdignore</code>.
</p>
<h2 id="syntax"><a class="self-link" href="#syntax"></a>Syntax</h2>
<p>
Since CMD-to-HTML conversion is merely a bunch of regex replacements
(with some dictionaries for temporary storage of strings),
the syntax for earlier replacements will have higher precedence
than that for later replacements.
The syntax of CMD, in the order of processing, is thus:
</p>
<h3 id="cmd-literals"><a class="self-link" href="#cmd-literals"></a>CMD literals</h3>
<pre class="cmd syntax"><code>(<span class="repeatable-delimiter">!</span> <span class="mandatory-argument">{content}</span> <span class="repeatable-delimiter">!</span>)</code></pre>
<p>
Produces <code><span class="mandatory-argument">{content}</span></code> literally,
with HTML syntax-character escaping and de-indentation.
Whitespace around <code><span class="mandatory-argument">{content}</span></code> is stripped.
For <code><span class="mandatory-argument">{content}</span></code> containing one or more consecutive exclamation marks
followed by a closing round bracket,
use a greater number of <span class="repeatable-delimiter">exclamation marks</span> in the delimiters.
</p>
<ul>
<li>CMD
<pre class="cmd"><code>Escaping: (! &amp; &lt; &gt; !).
Whitespace stripping: {(!      yes      !)}.
Enough exclamation marks: (!!! (!! (! never !) !!) !!!).
</code></pre>
</li>
<li>HTML
<pre class="html"><code>Escaping: &amp;amp; &amp;lt; &amp;gt;.
Whitespace stripping: {yes}.
Enough exclamation marks: (!! (! never !) !!).
</code></pre>
</li>
<li>Rendered
<p>
Escaping: &amp; &lt; &gt;.
Whitespace stripping: {yes}.
Enough exclamation marks: (!! (! never !) !!).
</p>
</li>
</ul>
<p>
CMD literals are very powerful.
For example, <code>id</code> and <code>class</code> in CMD block syntax
are specified in the form <code><span class="optional-argument">[id]</span>[<span class="optional-argument">[class]</span>]</code>.
Now, if for whatever reason you want an <code>id</code>
with square brackets, e.g.&nbsp;<code>[dumb-id]</code>,
then wrapping it inside a CMD literal will prevent it
from being interpreted as the class <code>dumb-id</code>:
</p>
<ul>
<li>CMD
<pre class="cmd"><code>``[dumb-id]
  Whoops!
``
``(![dumb-id]!)
  That's better.
``
</code></pre>
</li>
<li>HTML
<pre class="html"><code>&lt;pre class="dumb-id"&gt;&lt;code&gt;Whoops!
&lt;/code&gt;&lt;/pre&gt;
&lt;pre id="[dumb-id]"&gt;&lt;code&gt;That's better.
&lt;/code&gt;&lt;/pre&gt;
</code></pre>
</li>
</ul>
<h3 id="display-code"><a class="self-link" href="#display-code"></a>Display code</h3>
<pre class="cmd syntax"><code><span class="repeatable-delimiter">``</span><span class="optional-argument">[id]</span>[<span class="optional-argument">[class]</span>]↵ <span class="mandatory-argument">{content}</span> <span class="repeatable-delimiter">``</span></code></pre>
<p>
The delimiting backticks must be the first non-whitespace characters
on lines of equal indentation.
If <code><span class="optional-argument">[class]</span></code> is empty, the square brackets surrounding it may be omitted.
</p>
<p>
Produces the display code
<code>&lt;pre id="<span class="optional-argument">[id]</span>" class="<span class="optional-argument">[class]</span>"&gt;&lt;code&gt;<span class="mandatory-argument">{content}</span>&lt;/code&gt;&lt;/pre&gt;</code>,
with HTML syntax-character escaping
and de-indentation for <code><span class="mandatory-argument">{content}</span></code>.
For <code><span class="mandatory-argument">{content}</span></code> containing two or more consecutive backticks,
use a greater number of <span class="repeatable-delimiter">backticks</span> in the delimiters.
</p>
<ul>
<li>CMD
<pre class="cmd"><code>``id-0[class-1 class-2]
    Escaping: &amp; &lt; &gt;.
    Note that CMD literals have higher precedence,
    since they are processed first: (!! (! literally !) !!).
        Uniform
        de-indentation:
        yes.
``
````
  ``
  Use more backticks as required.
  If [id] and [class] are omitted,
  no corresponding attributes are generated.
  ``
````
</code></pre>
</li>
<li>HTML
<pre class="html"><code>&lt;pre id="id-0" class="class-1 class-2"&gt;&lt;code&gt;Escaping: &amp;amp; &amp;lt; &amp;gt;.
Note that CMD literals have higher precedence,
since they are processed first: (! literally !).
    Uniform
    de-indentation:
    yes.
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;``
Use more backticks as required.
If [id] and [class] are omitted,
no corresponding attributes are generated.
``
&lt;/code&gt;&lt;/pre&gt;
</code></pre>
</li>
<li>Rendered
<pre id="id-0" class="class-1 class-2"><code>Escaping: &amp; &lt; &gt;.
Note that CMD literals have higher precedence,
since they are processed first: (! literally !).
    Uniform
    de-indentation:
    yes.
</code></pre>
<pre><code>``
Use more backticks as required.
If [id] and [class] are omitted,
no corresponding attributes are generated.
``
</code></pre>
</li>
</ul>
<h3 id="inline-code"><a class="self-link" href="#inline-code"></a>Inline code</h3>
<pre class="cmd syntax"><code><span class="repeatable-delimiter">`</span> <span class="mandatory-argument">{content}</span> <span class="repeatable-delimiter">`</span></code></pre>
<p>
Produces the inline code
<code>&lt;code&gt;<span class="mandatory-argument">{content}</span>&lt;/code&gt;</code>,
with HTML syntax-character escaping
and de-indentation for <code><span class="mandatory-argument">{content}</span></code>.
Whitespace around <code><span class="mandatory-argument">{content}</span></code> is stripped.
For <code><span class="mandatory-argument">{content}</span></code> containing one or more consecutive backticks
which are not already protected by <a href="#cmd-literals">CMD literals</a>,
use a greater number of <span class="repeatable-delimiter">backticks</span> in the delimiters.
</p>
<ul>
<li>CMD
<pre class="cmd"><code>`` The escaped form of &amp; is &amp;amp;. Here is a tilde: `. ``
</code></pre>
</li>
<li>HTML
<pre class="html"><code>&lt;code&gt;The escaped form of &amp;amp; is &amp;amp;amp;. Here is a tilde: `.&lt;/code&gt;
</code></pre>
</li>
<li>Rendered
<p>
<code>The escaped form of &amp; is &amp;amp;. Here is a tilde: `.</code>
</p>
</li>
</ul>
<h3 id="comments"><a class="self-link" href="#comments"></a>Comments</h3>
<pre class="cmd syntax"><code>&lt;!-- <span class="mandatory-argument">{comment}</span> --&gt;</code></pre>
<p>
Removed, along with any preceding horizontal whitespace.
Although comments are weaker than literals and code
they may still be used to remove them.
For instance <code>(! A &lt;!-- B --&gt; !)</code> becomes <code>A &lt;!-- B --&gt;</code>,
whereas <code>&lt;!-- A (! B !) --&gt;</code> is removed entirely.
</p>
<footer>
<hr>
©&nbsp;2020&nbsp;Conway.
</footer>
</body>
</html>
